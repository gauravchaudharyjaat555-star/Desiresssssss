<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desires Accessories | Luxe Collection</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        /* --- CSS STYLES --- */
        :root{ --p-pink:#ff8fb1; --d-pink:#e75480; --soft-bg:#fffafb; --toast-bg:#333; --gold:#d4af37; }
        body{margin:0;font-family:'Poppins',sans-serif;background:var(--soft-bg);color:#333;padding-bottom:50px;}

        /* Header & Nav */
        header{background:white;padding:15px 20px;text-align:center;box-shadow:0 2px 10px rgba(0,0,0,0.05);position:sticky;top:0;z-index:900;}
        header h1{font-family:'Playfair Display';font-size:28px;color:var(--d-pink);margin:0;}
        .cart-icon{position:absolute;top:15px;right:20px;background:var(--d-pink);color:white;padding:8px 15px;border-radius:20px;font-size:14px;cursor:pointer; font-weight:600;}

        /* Hero Banner */
        .hero{background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1611591437281-460bfbe1220a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');background-size:cover;background-position:center;color:white;text-align:center;padding:80px 20px;margin-bottom:30px;}
        .hero h2{font-family:'Playfair Display';font-size:36px;margin:0 0 10px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);}
        .hero-btn{background:white;color:var(--d-pink);padding:10px 25px;border-radius:30px;text-decoration:none;font-weight:bold;}

        /* Layout & Cards */
        .container{max-width:1200px;margin:auto;padding:0 20px;}
        .section-title{text-align:center;font-family:'Playfair Display';color:#333;margin:50px 0 30px 0;font-size:28px;position:relative;}
        .section-title::after{content:'';display:block;width:60px;height:3px;background:var(--d-pink);margin:10px auto;}
        .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;}
        .card{background:white;border-radius:20px;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,0.06);transition:.3s;position:relative;}
        .card:hover{transform:translateY(-5px);}
        .badge{position:absolute;top:15px;left:15px;background:var(--d-pink);color:white;padding:5px 12px;border-radius:12px;font-size:12px;font-weight:600;}
        .card img{width:100%;height:260px;object-fit:cover;}
        .card-info{padding:20px;text-align:center;}
        .price-box{margin-bottom:15px;}
        .old-price{text-decoration:line-through;color:#888;font-size:14px;margin-right:8px;}
        .new-price{font-size:20px;color:var(--d-pink);font-weight:700;}
        .discount-tag{font-size:12px;color:green;font-weight:600;display:block;margin-top:2px;}
        .btn{background:var(--d-pink);color:white;border:none;padding:12px;border-radius:50px;width:100%;font-weight:600;cursor:pointer;font-size:16px;}
        .btn-outline{background:white;border:1px solid var(--d-pink);color:var(--d-pink);margin-top:8px;}

        /* Utils */
        .wa-float{position:fixed;bottom:20px;right:20px;background:#25d366;color:white;width:55px;height:55px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;text-decoration:none;z-index:1000;box-shadow:0 4px 10px rgba(0,0,0,0.2);}
        .toast{position:fixed;bottom:80px;right:20px;background:var(--toast-bg);color:white;padding:12px 20px;border-radius:12px;opacity:0;transition:0.4s;z-index:3000;}
        .toast.show{opacity:1;}
        .form-input{width:100%;padding:14px;margin:8px 0 15px 0;border-radius:10px;border:1px solid #ddd;box-sizing:border-box;font-family: inherit; font-size:15px;}
        .half-input-group{display:flex;gap:10px;}
        .half-input-group .form-input{width:50%;}

        /* --- PROFESSIONAL CART & MODAL CSS --- */
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);z-index:2000;overflow-y:auto;backdrop-filter: blur(5px);}
        .modal-content{background:white;width:90%;max-width:500px;margin:5% auto;padding:30px;border-radius:30px;text-align:center;box-shadow: 0 20px 50px rgba(0,0,0,0.3);}
        .modal-content h2{font-family: 'Playfair Display'; margin-bottom: 20px; color: var(--d-pink); font-size: 28px;}

        /* Cart Table Styling */
        .cart-table {width:100%; border-collapse: separate; border-spacing: 0 15px; margin-top: 10px;}
        .cart-table th {text-align: left; color: #888; font-weight: 400; padding: 0 10px; font-size: 14px;}
        .cart-table td {vertical-align: middle; background: #fff; padding: 10px;}
        .cart-item-name {font-size: 18px; font-weight: 600; color: #333; text-align: left;}
        .cart-item-price {font-size: 16px; color: var(--d-pink); font-weight: 600; display: block; text-align: left;}
        .qty-controls {display: flex; align-items: center; justify-content: center; background: #f0f0f0; border-radius: 20px; padding: 5px; width: fit-content; margin: auto;}
        .qty-btn {background: white; border: none; width: 32px; height: 32px; border-radius: 50%; font-weight: bold; font-size: 18px; color: var(--d-pink); cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
        .qty-val {margin: 0 12px; font-weight: 600; font-size: 16px;}
        .remove-btn {color: #ff4444; font-size: 20px; cursor: pointer; opacity: 0.7;}
        .remove-btn:hover {opacity: 1;}
        .cart-summary {background: #fffafb; padding: 20px; border-radius: 15px; margin-top: 20px; text-align: right;}
        .summary-row {display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 15px;}
        .total-row {display: flex; justify-content: space-between; margin-top: 10px; font-size: 22px; font-weight: 700; color: #333; border-top: 2px dashed #ddd; padding-top: 10px;}

        /* Reviews CSS */
        .reviews-grid {display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;}
        .review-card {background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); text-align: left;}
        .review-stars {color: #FFD700; margin-bottom: 5px;}
        .review-name {font-weight: 700; color: var(--d-pink); margin-top: 10px; display: block;}

        /* UPI Modal Specifics */
        .upi-box {background: #f9f9f9; padding: 15px; border-radius: 10px; border: 1px dashed var(--d-pink); margin: 15px 0;}
        .upi-id {font-weight: bold; font-size: 18px; color: #333; display: block; margin: 10px 0; user-select: all;}
    </style>
</head>
<body>

    <a href="#" class="wa-float" onclick="alert('Need Help? Chat with us on WhatsApp!')">üí¨</a>

    <header>
        <h1>Desires Accessories</h1>
        <div class="cart-icon" onclick="openCartModal()">üõí Bag (<span id="cCount">0</span>)</div>
    </header>

    <div class="hero">
        <h2>Premium Quality, Budget Prices</h2>
        <p>Flat Discounts on All New Arrivals</p>
        <a href="#bestsellers" class="hero-btn">Shop Now</a>
    </div>

    <div class="container">
        <h3 class="section-title" id="bestsellers">Best Sellers</h3>
        <div class="products">
            <div class="card">
                <span class="badge">Hot Sale</span>
                <img src="https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9">
                <div class="card-info">
                    <h3>Mini Desire Box</h3>
                    <div class="price-box"><span class="old-price">‚Çπ249</span><span class="new-price">‚Çπ149</span><span class="discount-tag">40% OFF</span></div>
                    <button class="btn" onclick="addCart('Mini Desire Box',149)">Add to Cart</button>
                </div>
            </div>
            <div class="card">
                <span class="badge">Trending</span>
                <img src="https://images.unsplash.com/photo-1519741497674-611481863552">
                <div class="card-info">
                    <h3>Classic Desire Box</h3>
                    <div class="price-box"><span class="old-price">‚Çπ499</span><span class="new-price">‚Çπ299</span><span class="discount-tag">40% OFF</span></div>
                    <button class="btn" onclick="addCart('Classic Desire Box',299)">Add to Cart</button>
                </div>
            </div>
        </div>

        <h3 class="section-title">Under ‚Çπ99 Store</h3>
        <div class="products">
            <div class="card">
                <span class="badge">Steal Deal</span>
                <img src="https://images.unsplash.com/photo-1599643478518-17488fbbcd75?auto=format&fit=crop&w=600&q=80">
                <div class="card-info">
                    <h3>Daily Wear Earrings</h3>
                    <div class="price-box"><span class="old-price">‚Çπ149</span><span class="new-price">‚Çπ99</span><span class="discount-tag">33% OFF</span></div>
                    <button class="btn" onclick="addCart('Daily Wear Earrings',99)">Add to Cart</button>
                </div>
            </div>
            <div class="card">
                <span class="badge">New</span>
                <img src="https://images.unsplash.com/photo-1611085583191-a3b181a88401?auto=format&fit=crop&w=600&q=80">
                <div class="card-info">
                    <h3>Velvet Scrunchies</h3>
                    <div class="price-box"><span class="old-price">‚Çπ199</span><span class="new-price">‚Çπ99</span><span class="discount-tag">50% OFF</span></div>
                    <button class="btn" onclick="addCart('Velvet Scrunchies',99)">Add to Cart</button>
                </div>
            </div>
            <div class="card">
                <span class="badge">Hot</span>
                <img src="https://images.unsplash.com/photo-1621570169561-0c2a2e193ee1?auto=format&fit=crop&w=600&q=80">
                <div class="card-info">
                    <h3>Silver Toe Ring Set</h3>
                    <div class="price-box"><span class="old-price">‚Çπ149</span><span class="new-price">‚Çπ99</span><span class="discount-tag">33% OFF</span></div>
                    <button class="btn" onclick="addCart('Silver Toe Ring Set',99)">Add to Cart</button>
                </div>
            </div>
        </div>

        <h3 class="section-title">The ‚Çπ199 Store</h3>
        <div class="products">
            <div class="card">
                <span class="badge">Best Value</span>
                <img src="https://images.unsplash.com/photo-1602173574767-37ac01994b2a?auto=format&fit=crop&w=600&q=80">
                <div class="card-info">
                    <h3>Pearl Bracelet Set</h3>
                    <div class="price-box"><span class="old-price">‚Çπ299</span><span class="new-price">‚Çπ199</span><span class="discount-tag">33% OFF</span></div>
                    <button class="btn" onclick="addCart('Pearl Bracelet Set',199)">Add to Cart</button>
                </div>
            </div>
            <div class="card">
                <span class="badge">Trendy</span>
                <img src="https://images.unsplash.com/photo-1599643477877-530eb83abc8e?auto=format&fit=crop&w=600&q=80">
                <div class="card-info">
                    <h3>Rose Gold Pendant</h3>
                    <div class="price-box"><span class="old-price">‚Çπ399</span><span class="new-price">‚Çπ199</span><span class="discount-tag">50% OFF</span></div>
                    <button class="btn" onclick="addCart('Rose Gold Pendant',199)">Add to Cart</button>
                </div>
            </div>
        </div>

        <h3 class="section-title">Premium Luxe</h3>
        <div class="products">
            <div class="card">
                <span class="badge" style="background:var(--gold);">Premium</span>
                <img src="https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?auto=format&fit=crop&w=600&q=80">
                <div class="card-info">
                    <h3>Bridal Combo Set</h3>
                    <div class="price-box"><span class="old-price">‚Çπ1200</span><span class="new-price">‚Çπ799</span><span class="discount-tag">Save ‚Çπ401</span></div>
                    <button class="btn" onclick="addCart('Bridal Combo Set',799)">Add to Cart</button>
                </div>
            </div>
            <div class="card">
                <span class="badge" style="background:var(--gold);">Luxe</span>
                <img src="https://images.unsplash.com/photo-1566150905458-1bf1fc113f0d?auto=format&fit=crop&w=600&q=80">
                <div class="card-info">
                    <h3>Luxury Clutch Bag</h3>
                    <div class="price-box"><span class="old-price">‚Çπ1499</span><span class="new-price">‚Çπ799</span><span class="discount-tag">Save ‚Çπ700</span></div>
                    <button class="btn" onclick="addCart('Luxury Clutch Bag',799)">Add to Cart</button>
                </div>
            </div>
        </div>

        <h3 class="section-title">Happy Customers ‚ù§Ô∏è</h3>
        <div class="reviews-grid">
            <div class="review-card">
                <div class="review-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p>"The bridal set was stunning! Exact same as picture. Loved it!"</p>
                <span class="review-name">- Priya Sharma</span>
            </div>
            <div class="review-card">
                <div class="review-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p>"Mini Desire box is a perfect gift. Delivery was super fast."</p>
                <span class="review-name">- Anjali Verma</span>
            </div>
        </div>
    </div>

    <div class="modal" id="cartModal">
        <div class="modal-content">
            <h2>Your Shopping Bag üõçÔ∏è</h2>
            <div style="overflow-y: auto; max-height: 300px;">
                <table class="cart-table" id="cartItemsTable"></table>
            </div>
            <div id="cartSummary" class="cart-summary" style="display:none;">
                <div class="summary-row"><span>Subtotal</span> <span id="subTotal">‚Çπ0</span></div>
                <div class="summary-row" style="color:green;"><span>Delivery</span> <span>Free</span></div>
                <div class="total-row"><span>Total</span> <span id="cartTotalMain">‚Çπ0</span></div>
            </div>
            <p id="emptyMsg" style="margin:20px 0; color:#888;">Your bag is empty üíî</p>
            <button class="btn" id="checkoutBtn" style="margin-top:20px; display:none;" onclick="openCheckout(null,0,'cart')">Proceed to Checkout ‚ûù</button>
            <button onclick="closeCartModal()" style="margin-top:15px;background:none;border:none;cursor:pointer;text-decoration:underline;">Continue Shopping</button>
        </div>
    </div>

    <div class="modal" id="checkoutModal">
        <div class="modal-content">
            <h2>Order Details üìù</h2>
            <form id="checkoutForm">
                <input type="text" class="form-input" placeholder="Full Name" id="name" required>
                <input type="tel" class="form-input" placeholder="Mobile Number" id="mobile" required>
                <input type="email" class="form-input" placeholder="Email Address" id="email" required>
                
                <p style="text-align:left;font-weight:600;margin:10px 0 5px 0;">Delivery Address üè†</p>
                <input type="text" class="form-input" placeholder="Address Line 1" id="addr1">
                <input type="text" class="form-input" placeholder="Address Line 2" id="addr2">
                <input type="text" class="form-input" placeholder="Landmark" id="landmark">
                <div class="half-input-group">
                    <input type="text" class="form-input" placeholder="City" id="city" required>
                    <input type="text" class="form-input" placeholder="District" id="district" required>
                </div>
                <div class="half-input-group">
                    <input type="text" class="form-input" placeholder="State" id="state" required>
                    <input type="text" class="form-input" placeholder="Pincode" id="pincode" required>
                </div>

                <p style="text-align:left;font-size:14px;font-weight:600;margin-top:15px;">Payment Method:</p>
                <label style="display:block;text-align:left;"><input type="radio" name="payment" value="UPI" checked> Pay via UPI (Recommended)</label>
                <label style="display:block;text-align:left;margin-bottom:15px;"><input type="radio" name="payment" value="WhatsApp Order"> Order via WhatsApp</label>

                <button type="submit" class="btn">Proceed to Payment</button>
                <button type="button" onclick="document.getElementById('checkoutModal').style.display='none'" style="margin-top:10px;background:none;border:none;cursor:pointer;">Cancel</button>
            </form>
        </div>
    </div>

    <div class="modal" id="upiModal">
        <div class="modal-content">
            <h2>Secure Payment üîí</h2>
            <div id="upiStep1">
                <p>Send payment to UPI ID:</p>
                <div class="upi-box">
                    <span class="upi-id">9870692723@sbi</span>
                </div>
                <p>Amount: <b id="payAmount" style="font-size:20px;">‚Çπ0</b></p>
                <button class="btn" style="background:#25d366; margin-bottom:10px;" onclick="tryOpenUPI()">Pay Now (App)</button>
                
                <p>Did you complete the payment?</p>
                <div class="half-input-group">
                    <button class="btn" onclick="showTxnInput()">Yes, Paid ‚úÖ</button>
                    <button class="btn btn-outline" onclick="switchToWhatsApp()">No, Send on WhatsApp üí¨</button>
                </div>
                <button onclick="goBackToCheckout()" style="margin-top:15px;background:none;border:none;cursor:pointer;color:#555;text-decoration:underline;">&larr; Go Back to Details</button>
            </div>

            <div id="upiStep2" style="display:none;">
                <h3>Payment Verificaton</h3>
                <p>Enter UPI Reference/Transaction ID:</p>
                <input type="text" class="form-input" id="txnId" placeholder="e.g. 4281xxxxxx">
                <button class="btn" onclick="finalizeOrder('UPI')">Submit Order</button>
                <button class="btn btn-outline" onclick="finalizeOrder('UPI')">Skip (Send Screenshot Later)</button>
                <button onclick="goBackToCheckout()" style="margin-top:15px;background:none;border:none;cursor:pointer;color:#555;text-decoration:underline;">&larr; Go Back to Details</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // CONFIG
        const myWhatsAppNumber = "919870692723";
        const myUpiId = "9870692723@sbi";

        let cart = [];
        let cartTemp = [];
        let orderData = {};

        try {
            const saved = localStorage.getItem('cart');
            if(saved) cart = JSON.parse(saved);
            if(!Array.isArray(cart)) cart = [];
        } catch(e) {
            cart = [];
        }

        document.addEventListener('DOMContentLoaded', updateCartCount);

        function showToast(msg){
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.classList.add('show');
            setTimeout(() => { t.classList.remove('show'); }, 2000);
        }

        function updateCartCount(){
            const countEl = document.getElementById('cCount');
            if(countEl) countEl.innerText = cart.length;
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function addCart(name, price){
            let existing = cart.find(p => p.name === name);
            if(existing){
                existing.qty += 1;
            } else {
                cart.push({name: name, price: price, qty: 1});
            }
            updateCartCount();
            showToast(name + ' added');
        }

        // --- NEW PROFESSIONAL CART UI ---
        function openCartModal(){
            const table = document.getElementById('cartItemsTable');
            const summary = document.getElementById('cartSummary');
            const emptyMsg = document.getElementById('emptyMsg');
            const checkoutBtn = document.getElementById('checkoutBtn');

            table.innerHTML = '';
            let total = 0;

            if(cart.length === 0){
                emptyMsg.style.display = 'block';
                summary.style.display = 'none';
                checkoutBtn.style.display = 'none';
            } else {
                emptyMsg.style.display = 'none';
                summary.style.display = 'block';
                checkoutBtn.style.display = 'block';

                cart.forEach((item, i) => {
                    total += item.price * item.qty;
                    const row = table.insertRow();
                    
                    // Name & Price
                    const infoCell = row.insertCell(0);
                    infoCell.innerHTML = `<div class="cart-item-name">${item.name}</div>
                                          <div class="cart-item-price">‚Çπ${item.price}</div>`;
                    
                    // Qty Controls
                    const qtyCell = row.insertCell(1);
                    qtyCell.innerHTML = `<div class="qty-controls">
                                            <button class="qty-btn" onclick="changeQty(${i},-1)">-</button>
                                            <span class="qty-val">${item.qty}</span>
                                            <button class="qty-btn" onclick="changeQty(${i},1)">+</button>
                                         </div>`;

                    // Remove
                    const rmCell = row.insertCell(2);
                    rmCell.innerHTML = `<span class="remove-btn" onclick="removeItem(${i})">‚úï</span>`;
                });

                document.getElementById('subTotal').innerText = '‚Çπ' + total;
                document.getElementById('cartTotalMain').innerText = '‚Çπ' + total;
            }
            document.getElementById('cartModal').style.display = 'block';
        }

        function closeCartModal(){
            document.getElementById('cartModal').style.display = 'none';
        }

        function removeItem(i){
            cart.splice(i, 1);
            updateCartCount();
            openCartModal();
        }

        function changeQty(i, val){
            cart[i].qty += val;
            if(cart[i].qty < 1) cart[i].qty = 1;
            updateCartCount();
            openCartModal();
        }

        function openCheckout(name, price, type){
            cartTemp = [];
            if(type === 'single'){
                cartTemp.push({name: name, price: price, qty: 1});
            } else if(type === 'cart'){
                if(cart.length === 0) { showToast("Cart is empty!"); return; }
                cartTemp = [...cart];
            }
            document.getElementById('checkoutModal').style.display = 'block';
        }

        function generateOrderID() {
            return 'ORD-' + Math.floor(1000 + Math.random() * 9000);
        }

        document.getElementById('checkoutForm').addEventListener('submit', function(e){
            e.preventDefault();
            orderData = {
                name: document.getElementById('name').value,
                mobile: document.getElementById('mobile').value,
                email: document.getElementById('email').value,
                addr1: document.getElementById('addr1').value || "",
                addr2: document.getElementById('addr2').value || "",
                landmark: document.getElementById('landmark').value || "",
                city: document.getElementById('city').value,
                district: document.getElementById('district').value,
                state: document.getElementById('state').value,
                pincode: document.getElementById('pincode').value,
                items: [...cartTemp]
            };

            let paymentMethod = document.querySelector('input[name="payment"]:checked').value;

            if(paymentMethod === 'UPI'){
                let total = 0;
                orderData.items.forEach(item => total += item.price * item.qty);
                orderData.totalAmount = total;
                document.getElementById('checkoutModal').style.display = 'none';
                document.getElementById('upiStep1').style.display = 'block';
                document.getElementById('upiStep2').style.display = 'none';
                document.getElementById('payAmount').innerText = '‚Çπ' + total;
                document.getElementById('upiModal').style.display = 'block';
            } else {
                finalizeOrder('WhatsApp Order');
            }
        });

        function tryOpenUPI(){
            let url = `upi://pay?pa=${myUpiId}&pn=DesiresAccessories&am=${orderData.totalAmount}&cu=INR`;
            window.location.href = url;
        }

        // --- NEW FUNCTIONS FOR BACK/SKIP ---
        
        function switchToWhatsApp(){
            // User clicked "No" on payment
            let confirmSwitch = confirm("Payment issue? Click OK to send order on WhatsApp directly.");
            if(confirmSwitch){
                finalizeOrder('WhatsApp Order (Payment Skipped)');
            }
        }

        function goBackToCheckout(){
            // Hide UPI modal, show Checkout modal
            document.getElementById('upiModal').style.display = 'none';
            document.getElementById('checkoutModal').style.display = 'block';
        }

        function showTxnInput(){
            document.getElementById('upiStep1').style.display = 'none';
            document.getElementById('upiStep2').style.display = 'block';
        }

        function finalizeOrder(paymentMode){
            try {
                const orderID = generateOrderID();
                let txnId = document.getElementById('txnId').value || "Not Provided";
                
                let fullAddress = `${orderData.addr1}, ${orderData.addr2}, ${orderData.landmark}, ${orderData.city}, ${orderData.district}, ${orderData.state} - ${orderData.pincode}`;
                
                let total = 0;
                let itemsList = "";
                orderData.items.forEach((item, i) => {
                    total += item.price * item.qty;
                    itemsList += `${i+1}. ${item.name} (x${item.qty}) - ‚Çπ${item.price*item.qty}%0a`;
                });

                let msg = `*New Order: ${orderID}* üõçÔ∏è%0a%0a`;
                msg += `*Name:* ${orderData.name}%0a*Phone:* ${orderData.mobile}%0a*Address:* ${fullAddress}%0a%0a`;
                msg += `*Items:*%0a${itemsList}%0a`;
                msg += `*Total:* ‚Çπ${total}%0a`;
                msg += `*Payment:* ${paymentMode}%0a`;
                if(paymentMode === 'UPI') msg += `*Txn ID:* ${txnId}`;

                window.location.href = `https://wa.me/${myWhatsAppNumber}?text=${msg}`;

                document.getElementById('checkoutModal').style.display = 'none';
                document.getElementById('upiModal').style.display = 'none';

                if(orderData.items.length > 1 || (cart.length > 0 && orderData.items[0].name === cart[0].name)) {
                    cart = [];
                    updateCartCount();
                }

            } catch(err) {
                alert("Error: " + err.message);
            }
        }

        window.addCart = addCart;
        window.openCheckout = openCheckout;
        window.openCartModal = openCartModal;
        window.closeCartModal = closeCartModal;
        window.changeQty = changeQty;
        window.removeItem = removeItem;
        window.tryOpenUPI = tryOpenUPI;
        window.switchToWhatsApp = switchToWhatsApp;
        window.goBackToCheckout = goBackToCheckout;
        window.showTxnInput = showTxnInput;
        window.finalizeOrder = finalizeOrder;
    </script>
</body>
</html>
